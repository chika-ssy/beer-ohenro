{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ren209/Desktop/yoshii/beer-ohenro-main/frontend/src/components/BreweryMap.tsx"],"sourcesContent":["// src/components/BreweryMap.tsx\nimport { GoogleMap, Marker, useJsApiLoader } from '@react-google-maps/api';\nimport { useMemo } from 'react';\n\ntype Brewery = {\n  name: string;\n  latitude: number;\n  longitude: number;\n};\n\ntype UserLocation = {\n  lat: number;\n  lng: number;\n};\n\ntype Props = {\n  breweries: Brewery[];\n  userLocation: UserLocation | null;  // 現在地を取得\n};\n\nconst containerStyle = {\n  width: '100%',\n  height: '500px',\n};\n\nexport default function BreweryMap({ breweries, userLocation }: Props) {\n  const { isLoaded } = useJsApiLoader({\n    googleMapsApiKey: process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY || '',\n  });\n\n  const center = useMemo(() => {\n    return userLocation || { lat: 34.3428, lng: 134.0466 }; // ← 現在地があれば優先(デフォルト:高松市)\n  }, [userLocation]);\n\n  if (!isLoaded) \n    return <p>Loading Map...</p>;\n\n    return (\n      <GoogleMap mapContainerStyle={containerStyle} center={center} zoom={10}>\n        {/* 現在地マーカー */}\n        {userLocation && (\n          <Marker\n            position={userLocation}\n            title=\"現在地\"\n            icon={{\n              url: \"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\",\n            }}\n          />\n        )}\n\n        {/* ブルワリーマーカー */}\n        {breweries.map((brewery, index) => (\n          <Marker\n            key={`${brewery.name}-${index}`}\n            position={{ lat: brewery.latitude, lng: brewery.longitude }}\n            title={brewery.name}\n          />\n        ))}\n      </GoogleMap>\n    );\n}"],"names":[],"mappings":"AAAA,gCAAgC;;;;;AAChC;AACA;;;;AAkBA,MAAM,iBAAiB;IACrB,OAAO;IACP,QAAQ;AACV;AAEe,SAAS,WAAW,EAAE,SAAS,EAAE,YAAY,EAAS;IACnE,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,+JAAA,CAAA,iBAAc,AAAD,EAAE;QAClC,kBAAkB,QAAQ,GAAG,CAAC,+BAA+B,IAAI;IACnE;IAEA,MAAM,SAAS,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QACrB,OAAO,gBAAgB;YAAE,KAAK;YAAS,KAAK;QAAS,GAAG,yBAAyB;IACnF,GAAG;QAAC;KAAa;IAEjB,IAAI,CAAC,UACH,qBAAO,8OAAC;kBAAE;;;;;;IAEV,qBACE,8OAAC,+JAAA,CAAA,YAAS;QAAC,mBAAmB;QAAgB,QAAQ;QAAQ,MAAM;;YAEjE,8BACC,8OAAC,+JAAA,CAAA,SAAM;gBACL,UAAU;gBACV,OAAM;gBACN,MAAM;oBACJ,KAAK;gBACP;;;;;;YAKH,UAAU,GAAG,CAAC,CAAC,SAAS,sBACvB,8OAAC,+JAAA,CAAA,SAAM;oBAEL,UAAU;wBAAE,KAAK,QAAQ,QAAQ;wBAAE,KAAK,QAAQ,SAAS;oBAAC;oBAC1D,OAAO,QAAQ,IAAI;mBAFd,GAAG,QAAQ,IAAI,CAAC,CAAC,EAAE,OAAO;;;;;;;;;;;AAO3C","debugId":null}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ren209/Desktop/yoshii/beer-ohenro-main/frontend/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport Image from \"next/image\";\nimport { useEffect, useState } from 'react';\nimport BreweryMap from '@/components/BreweryMap';\n\ntype Brewery = {\n  name: string;\n  latitude: number;\n  longitude: number;\n};\n\ntype UserLocation = {\n  lat: number;\n  lng: number;\n};\n\nexport default function Home() {\n  const [breweries, setBreweries] = useState<Brewery[]>([]);\n  const [userLocation, setUserLocation] = useState<UserLocation | null>(null);\n  // ブルワリーデータの取得\n  useEffect(() => {\n    fetch('http://localhost:8000/api/breweries') // FastAPI から brewery 情報を取得\n      .then((res) => res.json())\n      .then((data) => {\n        const validData = data\n          // ダミーデータ（例: \"ブランド名\" というIDのもの）を除外\n          .filter((b: any) => b.id !== 'ブランド名')\n          // 必要な情報を整形・数値化（lat/lngは文字列で来ることがあるため）\n          .map((b: any, index: number) => ({\n            name: (b.brand || b.name || `不明${index}`) + `_${index}`, // ← 重複防止\n            latitude: parseFloat(b.lat || b.latitude || 'NaN'),\n            longitude: parseFloat(b.lng || b.longitude || 'NaN'),\n          }))\n          // 緯度経度が有効な数値であるものだけを抽出\n          .filter(\n            (b: Brewery) =>\n              typeof b.latitude === 'number' &&\n              typeof b.longitude === 'number' &&\n              !isNaN(b.latitude) &&\n              !isNaN(b.longitude)\n          );\n\n        // 最終的なデータを state にセット\n        console.log(validData);\n        setBreweries(validData);\n\n      })\n      .catch((err) => console.error('Error fetching breweries:', err));\n  }, []);\n\n  // 現在地の取得\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          // 緯度経度を state に保存\n          setUserLocation({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          });\n        },\n        (error) => {\n          console.error('現在地を取得できませんでした:', error);\n        }\n      );\n    } else {\n      console.error('Geolocation API はこのブラウザでサポートされていません');\n    }\n  }, []);\n\n  return (\n    <div>\n      <h1>ブルワリー一覧</h1>\n      <ul>\n        {breweries.map((brewery, index) => (\n          <Marker\n            key={brewery.id || `brewery-${index}`}  // ユニークキーを確保\n            position={{ \n              lat: typeof brewery.lat === 'number' ? brewery.lat : 0, \n              lng: typeof brewery.lng === 'number' ? brewery.lng : 0 \n            }}\n            title={brewery.brand}\n          />\n        ))}\n      </ul>\n      \n      {/* 地図に現在地を渡す */}\n      <BreweryMap breweries={breweries} userLocation={userLocation} />\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAiBe,SAAS;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IACxD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAuB;IACtE,cAAc;IACd,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,uCAAuC,2BAA2B;SACrE,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI,IACtB,IAAI,CAAC,CAAC;YACL,MAAM,YAAY,IAChB,iCAAiC;aAChC,MAAM,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK,QAC7B,sCAAsC;aACrC,GAAG,CAAC,CAAC,GAAQ,QAAkB,CAAC;oBAC/B,MAAM,CAAC,EAAE,KAAK,IAAI,EAAE,IAAI,IAAI,CAAC,EAAE,EAAE,OAAO,IAAI,CAAC,CAAC,EAAE,OAAO;oBACvD,UAAU,WAAW,EAAE,GAAG,IAAI,EAAE,QAAQ,IAAI;oBAC5C,WAAW,WAAW,EAAE,GAAG,IAAI,EAAE,SAAS,IAAI;gBAChD,CAAC,EACD,uBAAuB;aACtB,MAAM,CACL,CAAC,IACC,OAAO,EAAE,QAAQ,KAAK,YACtB,OAAO,EAAE,SAAS,KAAK,YACvB,CAAC,MAAM,EAAE,QAAQ,KACjB,CAAC,MAAM,EAAE,SAAS;YAGxB,sBAAsB;YACtB,QAAQ,GAAG,CAAC;YACZ,aAAa;QAEf,GACC,KAAK,CAAC,CAAC,MAAQ,QAAQ,KAAK,CAAC,6BAA6B;IAC/D,GAAG,EAAE;IAEL,SAAS;IACT,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,UAAU,WAAW,EAAE;YACzB,UAAU,WAAW,CAAC,kBAAkB,CACtC,CAAC;gBACC,kBAAkB;gBAClB,gBAAgB;oBACd,KAAK,SAAS,MAAM,CAAC,QAAQ;oBAC7B,KAAK,SAAS,MAAM,CAAC,SAAS;gBAChC;YACF,GACA,CAAC;gBACC,QAAQ,KAAK,CAAC,mBAAmB;YACnC;QAEJ,OAAO;YACL,QAAQ,KAAK,CAAC;QAChB;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;;0BACC,8OAAC;0BAAG;;;;;;0BACJ,8OAAC;0BACE,UAAU,GAAG,CAAC,CAAC,SAAS,sBACvB,8OAAC;wBAEC,UAAU;4BACR,KAAK,OAAO,QAAQ,GAAG,KAAK,WAAW,QAAQ,GAAG,GAAG;4BACrD,KAAK,OAAO,QAAQ,GAAG,KAAK,WAAW,QAAQ,GAAG,GAAG;wBACvD;wBACA,OAAO,QAAQ,KAAK;uBALf,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,OAAO;;;;;;;;;;0BAW3C,8OAAC,gIAAA,CAAA,UAAU;gBAAC,WAAW;gBAAW,cAAc;;;;;;;;;;;;AAGtD","debugId":null}}]
}